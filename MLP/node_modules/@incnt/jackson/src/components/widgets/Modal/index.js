import React       from 'react'
import injectSheet from 'react-jss'
import {styles}    from './styles'

const Modal = injectSheet(styles)(props => {
  let {
    theme = 'light',
    classes = {},
    closeHandler = () => {},
    open = true,
    overlay = true,
    closable = true,
    title = '',
    children = null,
    ...rest
  } = props

  return (
    <div className={`${classes.root} ${open ? classes.open : null}`}>
      {overlay && <div className={classes.overlay} onClick={closeHandler}/>}
      <div className={classes.modal}>
        <div className={classes.header}>
          <h3 className={classes.title}>{title}</h3>
          {closable && <div onClick={closeHandler} className={classes.close}/>}
        </div>
        <div className={classes.content}>
          {children && React.Children.map(children, child => {
            if (React.isValidElement(child)) {
              return React.cloneElement(child, {theme, ...rest})
            } else {
              return child
            }
          })}
        </div>
      </div>
    </div>
  )
})

export {Modal}