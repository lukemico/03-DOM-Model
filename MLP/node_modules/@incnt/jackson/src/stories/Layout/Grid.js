import _           from 'lodash'
import React       from 'react'
import injectSheet from 'react-jss'
import StoryRouter from 'storybook-react-router'
import {storiesOf} from '@storybook/react'
import {checkA11y} from '@storybook/addon-a11y'
import {Card}      from 'components/content/Card/index'
import {Row}       from 'components/layout/Row'
import {Column}    from 'components/layout/Column'
import 'stylesheets/index.sass'

const grid = Array.apply(null, {length: 8}).map(Number.call, val => Number(val) + 1)

storiesOf('Layout/Grid', module)
  .addDecorator(checkA11y)
  .addDecorator(StoryRouter())
  .add('Default', () => (
    <div className={'text-center background-grey'}>
      {_.map(grid, i => {
        const cols = Array.apply(null, {length: i}).map(Number.call, val => Number(val) + 1)

        return (
          <Row key={i}>
            {_.map(cols, n => (
              <Column key={n}>
                <Card>{n}</Card>
              </Column>
            ))}
          </Row>
        )
      })}
    </div>
  ))
  .add('Overriding Styles', () => (
    <div className={'text-center background-grey'}>
      {_.map(grid, i => {
        const cols = Array.apply(null, {length: i}).map(Number.call, val => Number(val) + 1)

        return (
          <Row key={i}>
            {_.map(cols, n => (
              <MutatedColumn key={n}>
                <Card>{n}</Card>
              </MutatedColumn>
            ))}
          </Row>
        )
      })}
    </div>
  ))
  .add('Bootstrap-esque Usage', () => (
    <div className={'text-center background-grey'}>
      <Row>
        <Column xs={6} sm={3} md={4} lg={3} xl={2}><Card>Column</Card></Column>
        <Column xs={6} sm={3} md={4} lg={3} xl={2}><Card>Column</Card></Column>
        <Column xs={12} sm={6} md={4} lg={3} xl={2}><Card>Column</Card></Column>
        <Column xs={3} sm={2} md={3} lg={3} xl={2}><Card>Column</Card></Column>
        <Column xs={9} sm={6} md={3} lg={6} xl={2}><Card>Column</Card></Column>
        <Column xs={12} sm={4} md={6} lg={6} xl={2}><Card>Column</Card></Column>
      </Row>
    </div>
  ))

const MutatedColumn = injectSheet({
  root: {
    flex: '10% 0 0',
  },
})(({classes, children}) => (
  <Column className={classes.root}>
    {children}
  </Column>
))